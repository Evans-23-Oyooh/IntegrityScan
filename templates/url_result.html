{% extends 'base.html' %}

{% block title %}URL Created - Text Analyzer{% endblock %}

{% block content %}
<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
    <h1 class="h2">URL Shortened Successfully</h1>
    <a href="{% url 'url_shortener' %}" class="btn btn-secondary">Create Another</a>
</div>

<div class="row">
    <div class="col-lg-8">
        <div class="card shadow result-card safe">
            <div class="card-header">
                <h5 class="mb-0">
                    <i class="fas fa-check-circle text-success me-2"></i>Short URL Created
                </h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <h6>Original URL</h6>
                        <div class="alert alert-light">
                            <a href="{{ url_obj.original_url }}" target="_blank" class="text-break">{{ url_obj.original_url }}</a>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <h6>Short URL</h6>
                        <div class="alert alert-success">
                            <a href="/{{ url_obj.short_code }}/" target="_blank" class="fw-bold">{{ request.get_host }}/{{ url_obj.short_code }}/</a>
                        </div>
                    </div>
                </div>

                <div class="row mt-3">
                    <div class="col-md-4">
                        <h6>Short Code</h6>
                        <p class="lead">{{ url_obj.short_code }}</p>
                    </div>
                    <div class="col-md-4">
                        <h6>Clicks</h6>
                        <p class="lead">{{ url_obj.clicks }}</p>
                    </div>
                    <div class="col-md-4">
                        <h6>Created</h6>
                        <p class="lead">{{ url_obj.created_at|date:"M d, Y H:i" }}</p>
                    </div>
                </div>

                <div class="mt-3">
                    <button class="btn btn-primary" onclick="copyToClipboard('{{ request.get_host }}/{{ url_obj.short_code }}/')">
                        <i class="fas fa-copy me-2"></i>Copy Short URL
                    </button>
                    <a href="/{{ url_obj.short_code }}/" target="_blank" class="btn btn-outline-primary">
                        <i class="fas fa-external-link-alt me-2"></i>Test Link
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div class="col-lg-4">
        <div class="card shadow">
            <div class="card-header">
                <h5 class="mb-0">Share Options</h5>
            </div>
            <div class="card-body">
                <div class="d-grid gap-2">
                    <a href="https://twitter.com/intent/tweet?url={{ request.get_host }}/{{ url_obj.short_code }}/" target="_blank" class="btn btn-outline-info">
                        <i class="fab fa-twitter me-2"></i>Share on Twitter
                    </a>
                    <a href="https://www.facebook.com/sharer/sharer.php?u={{ request.get_host }}/{{ url_obj.short_code }}/" target="_blank" class="btn btn-outline-primary">
                        <i class="fab fa-facebook me-2"></i>Share on Facebook
                    </a>
                    <a href="https://www.linkedin.com/sharing/share-offsite/?url={{ request.get_host }}/{{ url_obj.short_code }}/" target="_blank" class="btn btn-outline-secondary">
                        <i class="fab fa-linkedin me-2"></i>Share on LinkedIn
                    </a>
                </div>
            </div>
        </div>

        <div class="card shadow mt-3">
            <div class="card-header">
                <h6 class="mb-0">URL Statistics</h6>
            </div>
            <div class="card-body">
                <ul class="list-unstyled small">
                    <li>• Click tracking enabled</li>
                    <li>• No expiration date</li>
                    <li>• Secure HTTPS redirect</li>
                    <li>• Analytics available</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<textarea id="copyText" style="position: absolute; left: -9999px;"></textarea>
{% endblock %}

{% block scripts %}
<script>
function copyToClipboard(text) {
    const textArea = document.getElementById('copyText');
    textArea.value = 'http://' + text;
    textArea.select();
    document.execCommand('copy');
    
    // Show feedback
    const btn = event.target;
    const originalText = btn.innerHTML;
    btn.innerHTML = '<i class="fas fa-check me-2"></i>Copied!';
    btn.classList.add('btn-success');
    btn.classList.remove('btn-primary');
    
    setTimeout(() => {
        btn.innerHTML = originalText;
        btn.classList.remove('btn-success');
        btn.classList.add('btn-primary');
    }, 2000);
}
</script>
{% endblock %}